function CustomMapType(){}CustomMapType.prototype.tileSize=new google.maps.Size(256,256);CustomMapType.prototype.maxZoom=7;CustomMapType.prototype.getTile=function(b,a,c){var c=c.createElement("DIV"),d=templateDir+"/images/tiles/",d=d+(a+"_"+b.x+"_"+b.y+".png");c.style.width=this.tileSize.width+"px";c.style.height=this.tileSize.height+"px";c.style.backgroundColor="#00000";c.style.backgroundImage="url("+d+")";return c};CustomMapType.prototype.name="Custom";CustomMapType.prototype.alt="Tile Coordinate Map Type";
var map,CustomMapType=new CustomMapType,fullscreen=!1,showMobs=!1,showBanks=!1,showCrafts=!1,showBinds=!1,showPortals=!1,showHoldings=!1,showVillages=!1,mobs=[],banks=[],binds=[],crafts=[],portals=[],chambers=[],holdings=[],villages=[];
function map_initialize(){var b={minZoom:3,maxZoom:7,isPng:!0,mapTypeControl:!1,streetViewControl:!1,center:new google.maps.LatLng(73,-109),zoom:4,mapTypeControlOptions:{mapTypeIds:["custom",google.maps.MapTypeId.ROADMAP],style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};map=new google.maps.Map(document.getElementById("map_canvas"),b);map.mapTypes.set("custom",CustomMapType);map.setMapTypeId("custom");google.maps.event.addListener(map,"click",function(a){placeMarker(a.latLng)});getPOIs()}
var marker,poiArray;function placeMarker(b){marker?(marker.setPosition(b),marker.title="Click Me!"):(marker=new google.maps.Marker({position:b,map:map,icon:templateDir+"/images/poi-default.png",title:"Click Me!"}),google.maps.event.addListener(marker,"click",function(){copyToClipboard(marker)}))}function copyToClipboard(b){window.prompt("Copy to clipboard: Ctrl+C, Enter",b.getPosition().lat()+"|"+b.getPosition().lng())}
function getPOIs(){mobs.length||jQuery.ajax({url:templateDir+"/getPOIs.php",dataType:"json",success:function(b){poiArray=b.pois;createMarkers()},error:function(){alert("Problem with Map. Please contact us through the feedback form describing what happened! Thanks!")}})}
function createMarkers(){for(var b=null,a,c=0;c<poiArray.length;c++){switch(poiArray[c]._poi_type){case "bank":a=templateDir+"/images/poi-bank.png";b=banks;break;case "mob":a=""==poiArray[c]._poi_level?templateDir+"/images/poi-mob.png":templateDir+"/images/poi-mob-"+poiArray[c]._poi_level+".png";b=mobs;break;case "city":a=templateDir+"/images/poi-city.png";b=holdings;break;case "hamlet":a=templateDir+"/images/poi-hamlet.png";b=holdings;break;case "cbind":a=templateDir+"/images/poi-bind-chaos.png";
b=binds;break;case "sbind":a=templateDir+"/images/poi-bind-safe.png";b=binds;break;case "craft":a=templateDir+"/images/poi-craft.png";b=crafts;break;case "portal":a=templateDir+"/images/poi-portal.png";b=portals;break;case "pchamber":a=templateDir+"/images/poi-chamber.png";b=portals;break;case "village":a=templateDir+"/images/poi-village.png",b=villages}var d=poiArray[c]._poi_loc.split("|"),d=new google.maps.LatLng(d[0],d[1]),e=new google.maps.Marker({position:d,map:null,icon:a,title:poiArray[c].title});
google.maps.event.addListener(e,"click",function(){copyToClipboard(e)});b.push(e)}}function showMarkers(b){var a;switch(b){case "mobs":a=mobs;break;case "banks":a=banks;break;case "crafts":a=crafts;break;case "binds":a=binds;break;case "portals":a=portals;break;case "holdings":a=holdings;break;case "villages":a=villages}for(var b=new google.maps.LatLngBounds,c=0;c<a.length;c++)a[c].setMap(map),b.extend(a[c].getPosition()),map.fitBounds(b)}
function hideMarkers(b){var a;switch(b){case "mobs":a=mobs;break;case "banks":a=banks;break;case "crafts":a=crafts;break;case "binds":a=binds;break;case "portals":a=portals;break;case "holdings":a=holdings;break;case "villages":a=villages}for(b=0;b<a.length;b++)a[b].setMap(null)}
function checkToggles(){jQuery.each(jQuery("#map-legend a"),function(){if(jQuery(this).hasClass("active"))switch(jQuery(this).attr("id")){case "mob-btn":showMarkers("mobs");break;case "bank-btn":showMarkers("banks");break;case "craft-btn":showMarkers("crafts");break;case "bind-btn":showMarkers("binds");break;case "portal-btn":showMarkers("portals");break;case "holding-btn":showMarkers("holdings");break;case "village-btn":showMarkers("villages")}})};
