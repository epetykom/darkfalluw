function CustomMapType(){}CustomMapType.prototype.tileSize=new google.maps.Size(256,256);CustomMapType.prototype.maxZoom=7;CustomMapType.prototype.getTile=function(a,b,c){var c=c.createElement("DIV"),d=templateDir+"/images/tiles/",d=d+(b+"_"+a.x+"_"+a.y+".png");c.style.width=this.tileSize.width+"px";c.style.height=this.tileSize.height+"px";c.style.backgroundColor="#00000";c.style.backgroundImage="url("+d+")";return c};CustomMapType.prototype.name="Custom";CustomMapType.prototype.alt="Tile Coordinate Map Type";
var map,CustomMapType=new CustomMapType,fullscreen=!1,showMobs=!1,showBanks=!1,showCrafts=!1,showBinds=!1,showPortals=!1,mobs=[],banks=[],binds=[],crafts=[],portals=[],chambers=[];
function map_initialize(){var a={minZoom:3,maxZoom:7,isPng:!0,mapTypeControl:!1,streetViewControl:!1,center:new google.maps.LatLng(73,-109),zoom:4,mapTypeControlOptions:{mapTypeIds:["custom",google.maps.MapTypeId.ROADMAP],style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};map=new google.maps.Map(document.getElementById("map_canvas"),a);map.mapTypes.set("custom",CustomMapType);map.setMapTypeId("custom");google.maps.event.addListener(map,"click",function(a){placeMarker(a.latLng)});getPOIs()}
var marker,poiArray;function placeMarker(a){marker?(marker.setPosition(a),marker.title="Click Me!"):(marker=new google.maps.Marker({position:a,map:map,icon:templateDir+"/images/poi-default.png",title:"Click Me!"}),google.maps.event.addListener(marker,"click",function(){copyToClipboard(marker)}))}function copyToClipboard(a){window.prompt("Copy to clipboard: Ctrl+C, Enter",a.getPosition().lat()+"|"+a.getPosition().lng())}
function getPOIs(){mobs.length||jQuery.ajax({url:templateDir+"/getPOIs.php",dataType:"json",success:function(a){poiArray=a.pois;createMarkers()},error:function(){alert("Problem with Map. Please contact us through the feedback form describing what happened! Thanks!")}})}
function createMarkers(){for(var a=null,b,c=0;c<poiArray.length;c++){switch(poiArray[c]._poi_type){case "bank":b=templateDir+"/images/poi-bank.png";a=banks;break;case "mob":b=""==poiArray[c]._poi_level?templateDir+"/images/poi-mob.png":templateDir+"/images/poi-mob-"+poiArray[c]._poi_level+".png";a=mobs;break;case "bindstones":b=templateDir+"/images/poi-bind.png";a=binds;break;case "craft":b=templateDir+"/images/poi-craft.png";a=crafts;break;case "portal":b=templateDir+"/images/poi-portal.png";a=portals;
break;case "chamber":b=templateDir+"/images/poi-chamber.png",a=portals}var d=poiArray[c]._poi_loc.split("|"),d=new google.maps.LatLng(d[0],d[1]),e=new google.maps.Marker({position:d,map:null,icon:b,title:poiArray[c].title});google.maps.event.addListener(e,"click",function(){copyToClipboard(e)});a.push(e)}}
function showMarkers(a){var b;switch(a){case "mobs":b=mobs;break;case "banks":b=banks;break;case "crafts":b=crafts;break;case "binds":b=binds;break;case "portals":b=portals}for(var a=new google.maps.LatLngBounds,c=0;c<b.length;c++)b[c].setMap(map),a.extend(b[c].getPosition()),map.fitBounds(a)}
function hideMarkers(a){var b;switch(a){case "mobs":b=mobs;break;case "banks":b=banks;break;case "crafts":b=crafts;break;case "binds":b=binds;break;case "portals":b=portals}for(a=0;a<b.length;a++)b[a].setMap(null)}
function checkToggles(){jQuery.each(jQuery("#map-legend a"),function(){if(jQuery(this).hasClass("active"))switch(jQuery(this).attr("id")){case "mob-btn":showMarkers("mobs");break;case "bank-btn":showMarkers("banks");break;case "craft-btn":showMarkers("crafts");break;case "bind-btn":showMarkers("binds");break;case "portal-btn":showMarkers("portals")}})}
var roads=[new google.maps.LatLng(70.22602804114847,-84.5672607421875),new google.maps.LatLng(70.1403642720717,-84.1937255859375),new google.maps.LatLng(70.13663169260924,-83.7432861328125),new google.maps.LatLng(70.06558465579644,-83.2598876953125),new google.maps.LatLng(69.96796725849451,-82.7655029296875),new google.maps.LatLng(69.96796725849451,-82.7655029296875),new google.maps.LatLng(69.80551647017177,-82.3260498046875),new google.maps.LatLng(69.80551647017177,-82.3260498046875),new google.maps.LatLng(69.64562538650985,
-82.2271728515625),new google.maps.LatLng(69.54987728327795,-82.0404052734375),new google.maps.LatLng(69.42282952635378,-82.7545166015625),new google.maps.LatLng(69.37257336614788,-83.4136962890625)];function createRoads(){(new google.maps.Polyline({path:roads,geodesic:!1,strokeColor:"#000000",strokeOpacity:1,strokeWeight:3})).setMap(map)};
